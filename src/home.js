import"./styles/style.css";import{ScrollTrigger as e}from"gsap/ScrollTrigger";import{gsap as t}from"gsap/src";import r from"split-type";function initHome(){t.to(".latest__banner",20,{x:"-82.6em",ease:"linear",repeat:-1});let o=new r(".split"),i=new r(".split__side");new r(".chars"),o.lines,i.lines;let a=document.querySelectorAll(".line");a.forEach(e=>{let t=document.createElement("span");t.className="line-wrapper",t.style.overflowY="hidden",e.parentNode.replaceChild(t,e),t.appendChild(e)});let s=document.querySelectorAll(".split"),l=document.querySelectorAll(".chars");s.forEach((e,r)=>{t.timeline({paused:!0,scrollTrigger:{trigger:e,start:"top bottom-=10%",toggleActions:"play none none reverse",markers:!1}}).fromTo(e.querySelectorAll(".line"),1,{y:"100%",opacity:1},{y:"0%",opacity:1,force3D:!0,ease:"Power2.easeOut",stagger:.1})}),l.forEach(e=>{t.timeline({paused:!0,scrollTrigger:{trigger:e,start:"top bottom-=30%",toggleActions:"play none none reverse"}}).fromTo(e.querySelectorAll(".char"),1,{y:"100%",opacity:0},{y:"0%",opacity:1,ease:"Power2.easeOut",stagger:.05})}),t.fromTo(".latest_video",{scale:.3,rotateX:60,rotateY:60},{scale:1,rotateX:0,rotateY:0,ease:"Power3.easeOut",scrollTrigger:{trigger:".home__first__section",start:"top bottom",end:"top top",scrub:!0}}),t.to(".detail__2",.8,{y:"10em",ease:"Power3.easeOut",scrollTrigger:{trigger:".last__popup",start:"top top+=10%",end:"bottom top",toggleActions:"play none none reverse",pin:!0}}),t.to(".detail__2",1.2,{height:"8em",ease:"Power3.easeOut",scrollTrigger:{trigger:".prj__desc",start:"top bottom-=20%"}}),t.to(".cover",{x:"-25%",ease:"none",scrollTrigger:{trigger:".how__section",start:"top top-=20%",end:()=>"+="+document.querySelector(".our__values__wrapper").offsetWidth,pin:!0,scrub:!0,pinSpacing:!1}});let n=t.utils.toArray(".service__wrapper");n.forEach((r,o)=>{window.matchMedia("(max-width: 768px)").matches?(t.to(r,{scrollTrigger:{trigger:r,start:"bottom bottom",scrub:!0,markers:!1},ease:"none"}),e.create({trigger:r,start:"bottom bottom",pin:!0,pinSpacing:!1,markers:!1,id:"pin",endTrigger:n.length,end:"max"})):(t.to(r,{scrollTrigger:{trigger:r,start:"top top+=10%",end:"bottom bottom",scrub:!0,markers:!1},ease:"none"}),e.create({trigger:r,start:"top top+=20%",pin:!0,pinSpacing:!1,markers:!1,id:"pin",endTrigger:n.length,end:"max"}))}),e.create({trigger:".why__us__section",start:"bottom bottom",pin:!0,pinSpacing:!1,markers:!1});document.querySelector(".enter").addEventListener("click",()=>{t.to(".preloader",0,{opacity:0,ease:"Power2.easeOut"}),t.to(".preloader",0,{display:"none",delay:1.2});let e=document.querySelector("audio");e.volume=.2,e.play();let o=t.timeline();o.set(".logo__svg",{transformOrigin:"0 50"}),o.fromTo(".logo__svg",1.5,{height:"50em"},{height:"4em",delay:.5,transformOrigin:"0 50",ease:"Power3.easeOut",scrollTrigger:{trigger:".logo__svg"}});let i=new r(".splitfirst");i.lines;document.querySelectorAll(".splitfirst").forEach(e=>{t.fromTo(e.querySelectorAll(".word"),1,{y:"70%",opacity:0},{y:"0%",opacity:1,ease:"Power3.easeOut",stagger:.05,delay:1})}),o.fromTo(".index__line",1.2,{width:"0vw"},{width:"100vw",ease:"Power3.easeOut",stagger:.05,delay:0}),o.fromTo(".index__i",1.2,{y:"70%",opacity:0},{y:"0%",opacity:1,ease:"Power3.easeOut",stagger:.05,delay:-.5}),o.fromTo(".image__me",1.2,{height:"0em"},{height:"5.63em",ease:"Power3.easeOut",delay:-1})});var g=!1;t.defaults({ease:"elastic(2, 0.4)"}),document.querySelectorAll(".linesvg").forEach(function(e){var r=e,o=r.querySelector("#path"),i=r.getBoundingClientRect(),a=i.top,s=i.height,l=s/2,n={x:0,y:l},p={x:window.innerWidth/2,y:l},c={x:window.innerWidth,y:l},$=!1;function d(){var e="M"+n.x+","+n.y+" Q"+p.x+","+p.y+" "+c.x+","+c.y;o.setAttribute("d",e)}window.addEventListener("resize",()=>{n={x:0,y:l},p={x:window.innerWidth/2,y:l},c={x:window.innerWidth,y:l},a=(i=r.getBoundingClientRect()).top,l=(s=i.height)/2}),window.addEventListener("scroll",()=>{a=(i=r.getBoundingClientRect()).top}),t.ticker.add(d),d(),r.addEventListener("mouseenter",()=>{$=!0}),r.addEventListener("mouseleave",()=>{$=!1,g&&(g=!1,t.to(p,{duration:1,x:window.innerWidth/2,y:s/2,onComplete:()=>g=!0}))}),window.addEventListener("mousemove",e=>{$&&((p.y>.9*s||p.y<-3)&&g&&(g=!1,t.to(p,{duration:2,x:e.clientX,y:s/2,onComplete:()=>g=!0})),g||(g=!0,t.killTweensOf(p)),p.x=e.clientX,p.y=e.clientY-a)})})}t.registerPlugin(e);export default initHome;